<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Pico-HSM セットアップ手順（公式）</title>
<style>
    body {
        font-family: "Segoe UI", sans-serif;
        margin: 30px;
        background: #f9f9f9;
        line-height: 1.7;
    }
    h1, h2, h3 {
        color: #2c3e50;
    }
    code {
        background: #eee;
        padding: 3px 5px;
        border-radius: 4px;
        font-size: 90%;
    }
    pre {
        background: #272822;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 6px;
        overflow-x: auto;
    }
    .box {
        background: #fff;
        padding: 20px;
        margin-bottom: 25px;
        border-left: 6px solid #4aa3df;
        border-radius: 4px;
    }
</style>
</head>
<body>

<h1>Pico-HSM セットアップ手順（公式）</h1>
<p>このページでは、Raspberry Pi Pico / Pico W を HSM（ハードウェアセキュリティモジュール）として利用するためのセットアップ方法を解説します。</p>

<hr>

<div class="box">
<h2>1. 必要なもの</h2>
<ul>
    <li>Raspberry Pi Pico または <b>Pico W（Wi-Fi対応）</b></li>
    <li>USB Type-A to micro-USB ケーブル (USBケーブルはご利用のボードに対応したものをご利用ください</li>
    <li>Windows / macOS / Linux PC</li>
    <li>Pico-HSM ファームウェア  
        <br>👉 <a href="https://github.com/Divings/Pico-HSM" target="_blank">https://github.com/Divings/Pico-HSM</a>
        <br> <a href="https://github.com/Divings/Pico-HSM/releases/"target="_blank">最新リリース</a>
    </li>
</ul>
</div>

<div class="box">
<h2>2. ファームウェアをダウンロード</h2>
<ol>
    <li>GitHub のリポジトリを開く</li>
    <li><code>main.py</code> と <code>boot.py</code> をダウンロード</li>
</ol>

<pre>/
 ├─ main.py
 ├─ boot.py
 └─ README.md
</pre>
</div>

<div class="box">
<h2>3. Pico を「書き込みモード」で起動</h2>
<ol>
    <li>Pico の <b>BOOTSELボタンを押したまま USB接続</b></li>
    <li>ボタンを離す</li>
    <li>PC に <code>RPI-RP2</code> ドライブが表示される</li>
</ol>
</div>

<div class="box">
<h2>4. MicroPython を書き込む</h2>
<p>以下から Pico / Pico W 用の MicroPython をダウンロードしてコピーします：</p>

<p>👉 <a href="https://micropython.org/download/rp2-pico-w/" target="_blank">https://micropython.org/download/rp2-pico-w/</a></p>

<p>ダウンロードした <code>.uf2</code> を <code>RPI-RP2</code> へコピー → 再起動します。</p>
</div>

<div class="box">
<h2>5. Thonny で Pico に接続</h2>
<ol>
    <li>Thonny を起動</li>
    <li>右下のインタプリタから <b>MicroPython (Raspberry Pi Pico)</b> を選択</li>
    <li>Pico 内部のファイルが表示される</li>
</ol>
</div>

<div class="box">
<h2>6. Pico-HSM ファームウェアを書き込み</h2>
<ol>
    <li>Thonnyで <code>main.py</code> を Pico へドラッグして保存</li>
    <li><code>boot.py</code> も同様に保存</li>
    <p>main.pyのMASTER_SEEDは最低 128bit（英数字22文字以上）<br>実運用では 256bit（英数字43文字以上）
のランダム値を使用してください。<br>
これは一般的な暗号モジュールで推奨される鍵強度に準じています。</p>
</ol>
</div>

<div class="box">
<h2>7. （任意）Wi-Fi設定（Pico Wのみ）</h2>
<p><code>config.json</code> を Pico に置くと起動時に Wi-Fi 接続できます。</p>
<p>(なお、現時点のファームウェアコードではWI-FIに対応していません)</p>
<pre>{
    "wifi_ssid": "YOUR_SSID",
    "wifi_pass": "YOUR_PASSWORD"
}
</pre>
</div>

<div class="box">
<h2>8. 動作確認</h2>

<pre>[Pico-HSM] Ready.
Waiting for command...</pre>
</div>

<div class="box">
<h2>9. PC側からの利用（EncryptSecureDEC）</h2>

<pre>from PicoHSM import PicoHSM_HMAC

hsm = PicoHSM_HMAC()
mac = hsm.hmac(b"hello")

print(mac.hex())
</pre>
</div>

<div class="box">
<h2>10. よくある質問（FAQ）</h2>

<h3>Q1. GitHubのものと同じですか？</h3>
<p>→ はい。公式と同じです。</p>

<h3>Q2. うまく動かない場合は？</h3>
<ul>
    <li>USBケーブルが充電専用ではないか確認</li>
    <li>BOOTSEL 書き込みをやり直す</li>
    <li>Thonnyでポートを確認</li>
</ul>

<h3>Q3. 複数台使えますか？</h3>
<p>→ 可能です。ポート自動検出で切り替えられます。</p>
</div>

<hr>

<h2>以上でセットアップ完了です！</h2>
<p>Pico-HSM は、低価格で本格的な HMAC・署名が実行できるミニHSMです。<br>
EncryptSecureDEC・RSA-Cryptors と組み合わせることで安全性が強化されます。</p>

</body>
</html>
